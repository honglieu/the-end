<div>
  <div class="d-flex justify-content-between align-items-center">
    <h2 class="title">Performance ranking</h2>
    <div>
      <trudi-select-dropdown
        [clearable]="false"
        [ngModel]="currentCriteria"
        (ngModelChange)="changeCurrentCriteria($event)"
        [items]="CRITERIA_DROPBOX">
      </trudi-select-dropdown>
    </div>
  </div>
  <div class="top-performance-table d-flex flex-dir-column">
    <div>
      <div class="header-row d-flex gap-32">
        <div class="rank">Rank</div>
        <div class="name flex-1">Name</div>
        <div class="criteria">{{currentTopPerformanceLabel}}</div>
      </div>
      <div class="top-performance-scroll">
        <ng-container
          *ngIf="transformTopPerformingData.length !== 0; else noData">
          <ng-container *ngFor="let item of transformTopPerformingData">
            <div class="center-row d-flex gap-32">
              <div class="rank d-flex justify-content-center">
                <ng-container *ngIf="item.rank === 1; else rankingNumber">
                  <trudi-icon icon="cupRanking" class="size-32"> </trudi-icon>
                </ng-container>
                <ng-template #rankingNumber>
                  <span>{{item.rank ? item.rank : '-'}}</span>
                </ng-template>
              </div>
              <div class="name d-flex gap-8 flex-1 align-items-center">
                <app-user-avatar
                  [avatar]="item?.googleAvatar"
                  [user]="item"
                  [style]="'width: 32px; height: 32px; font-size: 16px;'"></app-user-avatar>
                <span
                  nz-tooltip
                  nzTooltipTitle="{{item.firstName}} {{item.lastName}}"
                  >{{item.firstName}} {{item.lastName}}</span
                >
              </div>
              <div class="criteria">
                <span *ngIf="item?.rank"
                  >{{item?.total | number: '1.0-2':'en'}}</span
                >
                <span *ngIf="!item?.rank">-</span>
              </div>
            </div>
          </ng-container>
        </ng-container>
        <ng-template #noData>
          <div class="d-flex gap-32 center-row">
            <div class="rank d-flex justify-content-center">
              <span class="rank">-</span>
            </div>
            <div class="name d-flex gap-8 flex-1 align-items-center">
              <span>-</span>
            </div>
            <div class="criteria">
              <span>-</span>
            </div>
          </div>
          <div class="d-flex gap-32 center-row">
            <div class="rank d-flex justify-content-center">
              <span class="rank">-</span>
            </div>
            <div class="name d-flex gap-8 flex-1 align-items-center">
              <span>-</span>
            </div>
            <div class="criteria">
              <span>-</span>
            </div>
          </div>
          <div class="d-flex gap-32 center-row">
            <div class="rank d-flex justify-content-center">
              <span class="rank">-</span>
            </div>
            <div class="name d-flex gap-8 flex-1 align-items-center">
              <span>-</span>
            </div>
            <div class="criteria">
              <span>-</span>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
